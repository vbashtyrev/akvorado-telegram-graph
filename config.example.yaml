# Конфиг бота «график Akvorado в Telegram»

# Часовой пояс для всех графиков (ось времени, срез «с — по»). По умолчанию UTC.
# display_timezone: "GMT+5"   # или "UTC+5", "Asia/Almaty", "Etc/GMT-5"

telegram:
  bot_token: "123456:ABC-DEF..."   # от @BotFather
  # Опционально: только эти чаты могут вызывать команды (пусто = бот отвечает в любом чате; для продакшена лучше задать список).
  # allowed_chat_ids: [ 123456789, -987654321 ]

clickhouse:
  url: "http://127.0.0.1:8123"
  # Если ClickHouse на другом хосте — поднимите туннель: ssh -L 8123:127.0.0.1:8123 user@server
  # user: ""
  # password: ""

  # Таблица и фильтр как в UI Akvorado (InIfBoundary = external)
  table: "default.flows"
  # В консоли L3ᵇ⁄ₛ = Bytes*SamplingRate (исходник console/clickhouse.go). По умолчанию бот так же считает.
  # bytes_expression (если задать) подставляется в SQL как фрагмент выражения — только доверенное значение, без ; и подзапросов.
  # Консоль для длинных периодов берёт агрегированные таблицы (system.tables → flows%, resolution из имени).
  # Для совпадения Min/Max с UI за 24 ч / 7 д обязательно укажите ту же таблицу и интервал, что и консоль:
  # для 6 ч — часто flows_1m0s, интервал 60 с:
  # table_6h: "default.flows_1m0s"
  # interval_sec_6h: 60
  # для 24 ч и 7 д — в консоли обычно почасовая таблица (flows_1h0m0s), интервал 3600 с:
  # table_24h: "default.flows_1h0m0s"
  # interval_sec_24h: 3600
  # Если таких таблиц нет (нет консолидации), Min в боте будет ниже, чем в UI (минимум по более мелким корзинам).
  boundary_filter: "external"   # только внешний трафик
